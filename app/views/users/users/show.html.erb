<% if flash[:success] %>
  <div class="alert alert-success">
    <%= flash[:success] %>
  </div>
<% end %>
<div class="container1">
  <div class="row">
    <div class="col-md-6">
      <div class="window">
        <div class="overlay"></div>
        <div class="box header">
          <%= image_tag @user.image_url %>
          <h2><%= @user.name %></h2>
          <h4><%= @user.profile %></h4>
          <ul>
            <li><%= @user.posts.count %>post</li>
            <li><%= @user.followers.count %>follwer</li>
            <li><%= @user.followeds.count %>follow</li>
          </ul>
        </div>
        <div class="box footer">
          <% if current_user != @user %>
            <% if current_user.following?(@user) %>
              <%= link_to "unfollow", user_relationships_path(@user.id), method: :delete, class: "btn btn-danger" %>
            <% else %>
              <%= link_to "follow", user_relationships_path(@user.id), method: :post, class: "btn btn-success" %>
            <% end %>
          <% end %>
          <div class="btn"><%= link_to "Edit", edit_user_path %></div>
        </div>
      </div>
    </div>
    <div class="col-md-6 text-light">
      <%= paginate @post_all %>
      <div class="flex">
        <% if @post_all.any? %>
          <% @post_all.each do |post| %>
            <div class="card mt-4">
              <div class="plf">
                <div><%= image_tag post.user.image_url %></div>
                <div class="name"><%= @user.name %></div>
                <div class="name"><%= @user.username %></div>
                <div class="font">
                  <i class="fa-regular fa-comments"></i>
                  <%= post.comments.count %>
                  <%= link_to post_path(post), method: :get do %>
                    <i class="fa-solid fa-check"></i>
                  <% end %>
                  <%= link_to reposts_path(repost_id: post.id), method: :get do %>
                    <i class="fa-solid fa-retweet"></i>
                  <% end %>
                  <%= link_to post_path(post), method: :delete do %>
                    <i class="fa-solid fa-trash-can"></i>
                  <% end %>
                </div>
              </div>
              
              <div class="content text-dark">
                <div><%= post.content %></div>
                <% if post.images.attached? %>
                  <div class="image-container">
                    <% post.images.each do |image| %>
                      <%= image_tag image, class: 'img-fluid' , loading: 'lazy' %>
                    <% end %>
                  </div>
                <% end %>
              </div>
            </div>
          <% end %>
        <% else %>
          <div>No posts found.</div>
        <% end %>
      </div>
    </div>
  </div>
</div>

