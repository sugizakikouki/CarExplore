<div class="container">
    <div class="row d-flex justify-content-between mt-5">
        <div class="col-md-6 text-light">
            <table class="table text-light">
                <tr>
                    <th scope="col">name</th>
                    <th scope="col">username</th>
                    <th scope="col">content</th>
                    <th scope="col">image</th>
                    <th scope="col">comments</th>
                    <th scope="col">favorites</th>
                    <th></th>
                </tr>
                <% @posts.each do |post| %>
                <tr>
                    <td><%= post.user.name %></td>
                    <td><%= post.user.username %></td>
                    <td>
                        <%= post.content %><br>
                        <p></p>
                        <% post.tags.each do |tag| %>
                            <%= tag.tag_name %>
                        <% end %>
                    </td>
                    <td>
                        <% if post.images.attached? %>
                            <% post.images.each do |image| %>
                                <div class="image-container" style="margin-right: 10px; margin-bottom: 10px;">
                                    <%= image_tag image.variant(resize_to_limit: [1000, 1000]).processed, class: 'img-fluid', style: 'max-width: 100px; max-height: 100px;' %>
                                </div>
                            <% end %>
                        <% end %>
                    </td>
                    <td><%= post.comments.count %></td>
                    <td><%= post.favorites.count %></td>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Menu
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a class="dropdown-item" href="#"><%= link_to 'Show', post_path(post) %></a>
                                <a class="dropdown-item" href="#"><%= link_to 'repost', reposts_path(repost_id: post.id) %></a>
                                <% if post.user == current_user %>
                                    <a class="dropdown-item" href="#"><%= link_to 'Delete', post_path(post), method: :delete, data: { confirm: 'Are you sure?' } %></a>
                                <% end %>
                            </div>
                        </div>
                    </td>
                </tr>
                <% end %>
                <%= paginate @posts %>
            </table>
        </div>
        <div class="col-md-4 offset-md-2 text-light">
            <%= form_with model: @post do |f| %>
                <div class="mt-3">
                    <h4>Post</h4>
                    <%= f.text_area :content, class: 'form-control', rows: 8, cols: 80  %>
                </div>
                <div class="mt-3">
                    <h5>Tag</h5>
                    <%= f.text_field :tag_name%>
                </div>
                <div class="mt-3">
                    <h5>Image</h5>
                    <%= f.file_field :images, multiple: true, accept: "image/*" %>
                </div>
                <button type="submit" class="btn-s btn-sm mt-3" style="width: 80px;">Post</button>
            <% end %>
        </div>
    </div>
</div>



