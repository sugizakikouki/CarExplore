<div class="container">
    <div class="row d-flex justify-content-between mt-5">
        <div class="col-md-6 text-light">
            <table class="table text-light">
                <tr>
                    <th scope="col">name</th>
                    <th scope="col">username</th>
                    <th scope="col">content</th>
                    <th scope="col">image</th>
                    <th scope="col">comments</th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                    <td><%= @post.user.name %></td>
                    <td><%= @post.user.username %></td>
                    <td><%= @post.content %></td>
                    <td>
                        <% if @post.images.attached? %>
                            <% @post.images.each do |image| %>
                                <div class="image-container" style="margin-right: 10px; margin-bottom: 10px;">
                                    <%= image_tag image, class: 'img-fluid', style: 'max-width: 100px; max-height: 100px;' %>
                                </div>
                            <% end %>
                        <% end %>
                    </td>
                    <td>
                        <%= @post.comments.count %>
                    </td>
                    <td>
                        <% if @post.favorited_by?(current_user) %>
                            <p>
                                <%= link_to post_favorites_path(@post), method: :delete do %>
                                    <i class="fa-solid fa-heart" style="color: #ff0000;"></i>
                                    <%= @post.favorites.count %>
                                <% end %>
                            </p>
                        <% else %>
                            <p>
                                <%= link_to post_favorites_path(@post), method: :post do %>
                                    <i class="fa-regular fa-heart" style="color: #005eff;"></i>
                                    <%= @post.favorites.count %>
                                <% end %>
                            </p>
                        <% end %>
                    </td>
                    <td>
                        <div class="dropdown">
                            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Menu
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a class="dropdown-item" href="#">Action 1</a>
                                <a class="dropdown-item" href="#">Action 2</a>
                                <% if @post.user == current_user %>
                                    <a class="dropdown-item" href="#"><%= link_to 'Delete', post_path(@post), method: :delete, data: { confirm: 'Are you sure?' } %></a>
                                <% end %>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
            <div>
                <% @post.comments.each do |comment| %>
                    <p><%= image_tag comment.user.image_url(:icon) %></p>
                    <%= comment.user.name %>
                    <%= comment.created_at.strftime('%Y/%m/%d') %><%= comment.comment %>
                    <% if comment.user == current_user %>
                        <%= link_to "削除", post_comment_path(comment.post, comment), method: :delete %>
                    <% end %>
                <% end %>
            </div>
        </div>
        <div class="col-md-4 offset-md-2 text-light">
            <div>
                <%= form_with model: [@post, @comment] do |f| %>
                    <div class="mt-3">
                        <h4>Reply</h4>
                        <%= f.text_area :comment, rows: '5' %>
                    </div>
                    <div class="mt-3">
                        <h5>Image</h5>
                        <%= f.file_field :images, multiple: true, accept: "image/*" %>
                    </div>
                    <button type="submit" class="btn-s btn-sm mt-3" style="width: 80px;">Reply</button>
                <% end %>
            </div>
        </div>
    </div>
</div>